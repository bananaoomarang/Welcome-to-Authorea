\begin{lstlisting}
\def\onlyHTML#1{\iflatexml #1\fi}
\def\onlyPDF#1{\iflatexml\else #1\fi}
\end{lstlisting}

and then use it to specify PDF-only line-breaks for your \verb|{minipage}| blocks:
\begin{lstlisting}
% ...
\end{minipage}\onlyPDF{\newline}
\begin{minipage}{% ...
\end{lstlisting}

The most common use of PDF-specific directives would likely remain the need for hard page breaks:
\begin{lstlisting}
\onlyPDF{\newpage}
\end{lstlisting}